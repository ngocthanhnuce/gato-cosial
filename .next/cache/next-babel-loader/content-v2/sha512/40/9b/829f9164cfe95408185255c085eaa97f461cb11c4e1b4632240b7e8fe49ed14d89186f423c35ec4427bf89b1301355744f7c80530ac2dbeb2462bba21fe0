{"ast":null,"code":"import _regeneratorRuntime from \"E:/social_network/gato-cosial/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/social_network/gato-cosial/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"E:\\\\social_network\\\\gato-cosial\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\n// @ts-nocheck\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport baseUrl from \"../utils/baseUrl\";\nimport { NoPosts } from \"../components/Layout/Nodata\";\nimport CreatePost from \"../components/Post/CreatePost\";\nimport CardPost from \"../components/Post/CardPost\";\nimport { Segment } from \"semantic-ui-react\";\nimport { parseCookies } from \"nookies\";\n\nfunction Index(props) {\n  _s();\n\n  var _this = this;\n\n  var user = props.user,\n      postsData = props.postsData,\n      errorLoading = props.errorLoading;\n\n  var _useState = useState(postsData),\n      posts = _useState[0],\n      setPosts = _useState[1];\n\n  var _useState2 = useState(false),\n      showToastr = _useState2[0],\n      setShowToastr = _useState2[1];\n\n  useEffect(function () {\n    document.title = \"Welcome \".concat(user.name.split(\"\")[0]);\n  }, []);\n  if (posts.length === 0 || errorLoading) return /*#__PURE__*/_jsxDEV(NoPosts, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 50\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: \"15px\",\n      marginBottom: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(CreatePost, {\n      user: user,\n      setPosts: setPosts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Segment, {\n      children: posts === null || posts === void 0 ? void 0 : posts.map(function (post) {\n        return /*#__PURE__*/_jsxDEV(CardPost, {\n          post: post,\n          user: user,\n          setPosts: setPosts,\n          setShowToastr: setShowToastr\n        }, post._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Index, \"zMf/QmelW5ZCO+oRjN//x7nkT5Q=\");\n\n_c = Index;\n\nIndex.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var _parseCookies, token, res;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _parseCookies = parseCookies(ctx), token = _parseCookies.token;\n            _context.next = 4;\n            return axios.get(\"\".concat(baseUrl, \"/api/posts\"), {\n              headers: {\n                Authorization: token\n              },\n              params: {\n                pageNumber: 1\n              }\n            });\n\n          case 4:\n            res = _context.sent;\n            return _context.abrupt(\"return\", {\n              postsData: res.data\n            });\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", {\n              errorLoading: true\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["E:/social_network/gato-cosial/pages/index.js"],"names":["React","useEffect","useState","axios","baseUrl","NoPosts","CreatePost","CardPost","Segment","parseCookies","Index","props","user","postsData","errorLoading","posts","setPosts","showToastr","setShowToastr","document","title","name","split","length","marginTop","marginBottom","map","post","_id","getInitialProps","ctx","token","get","headers","Authorization","params","pageNumber","res","data"],"mappings":";;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,OAAT,QAAwB,6BAAxB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,SAASC,OAAT,QAAwB,mBAAxB;AACA,SAASC,YAAT,QAA6B,SAA7B;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AAAA;;AAAA;;AAAA,MACZC,IADY,GACsBD,KADtB,CACZC,IADY;AAAA,MACNC,SADM,GACsBF,KADtB,CACNE,SADM;AAAA,MACKC,YADL,GACsBH,KADtB,CACKG,YADL;;AAAA,kBAEMZ,QAAQ,CAACW,SAAD,CAFd;AAAA,MAEbE,KAFa;AAAA,MAENC,QAFM;;AAAA,mBAGgBd,QAAQ,CAAC,KAAD,CAHxB;AAAA,MAGbe,UAHa;AAAA,MAGDC,aAHC;;AAKpBjB,EAAAA,SAAS,CAAC,YAAM;AACdkB,IAAAA,QAAQ,CAACC,KAAT,qBAA4BR,IAAI,CAACS,IAAL,CAAUC,KAAV,CAAgB,EAAhB,EAAoB,CAApB,CAA5B;AACD,GAFQ,EAEN,EAFM,CAAT;AAGA,MAAIP,KAAK,CAACQ,MAAN,KAAiB,CAAjB,IAAsBT,YAA1B,EAAwC,oBAAO,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,UAAP;AACxC,sBACE;AAAK,IAAA,KAAK,EAAE;AAAEU,MAAAA,SAAS,EAAE,MAAb;AAAqBC,MAAAA,YAAY,EAAE;AAAnC,KAAZ;AAAA,4BACE,QAAC,UAAD;AAAY,MAAA,IAAI,EAAEb,IAAlB;AAAwB,MAAA,QAAQ,EAAEI;AAAlC;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,OAAD;AAAA,gBACGD,KADH,aACGA,KADH,uBACGA,KAAK,CAAEW,GAAP,CAAW,UAACC,IAAD;AAAA,4BACV,QAAC,QAAD;AAEE,UAAA,IAAI,EAAEA,IAFR;AAGE,UAAA,IAAI,EAAEf,IAHR;AAIE,UAAA,QAAQ,EAAEI,QAJZ;AAKE,UAAA,aAAa,EAAEE;AALjB,WACOS,IAAI,CAACC,GADZ;AAAA;AAAA;AAAA;AAAA,iBADU;AAAA,OAAX;AADH;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAgBD;;GAzBQlB,K;;KAAAA,K;;AA2BTA,KAAK,CAACmB,eAAN;AAAA,sEAAwB,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAEFrB,YAAY,CAACqB,GAAD,CAFV,EAEZC,KAFY,iBAEZA,KAFY;AAAA;AAAA,mBAIF5B,KAAK,CAAC6B,GAAN,WAAa5B,OAAb,iBAAkC;AAClD6B,cAAAA,OAAO,EAAE;AAAEC,gBAAAA,aAAa,EAAEH;AAAjB,eADyC;AAElDI,cAAAA,MAAM,EAAE;AAAEC,gBAAAA,UAAU,EAAE;AAAd;AAF0C,aAAlC,CAJE;;AAAA;AAIdC,YAAAA,GAJc;AAAA,6CASb;AAAExB,cAAAA,SAAS,EAAEwB,GAAG,CAACC;AAAjB,aATa;;AAAA;AAAA;AAAA;AAAA,6CAWb;AAAExB,cAAAA,YAAY,EAAE;AAAhB,aAXa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAxB;;AAAA;AAAA;AAAA;AAAA;;AAeA,eAAeJ,KAAf","sourcesContent":["// @ts-nocheck\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport baseUrl from \"../utils/baseUrl\";\r\nimport { NoPosts } from \"../components/Layout/Nodata\";\r\nimport CreatePost from \"../components/Post/CreatePost\";\r\nimport CardPost from \"../components/Post/CardPost\";\r\nimport { Segment } from \"semantic-ui-react\";\r\nimport { parseCookies } from \"nookies\";\r\n\r\nfunction Index(props) {\r\n  const { user, postsData, errorLoading } = props;\r\n  const [posts, setPosts] = useState(postsData);\r\n  const [showToastr, setShowToastr] = useState(false);\r\n\r\n  useEffect(() => {\r\n    document.title = `Welcome ${user.name.split(\"\")[0]}`;\r\n  }, []);\r\n  if (posts.length === 0 || errorLoading) return <NoPosts />;\r\n  return (\r\n    <div style={{ marginTop: \"15px\", marginBottom: \"20px\" }}>\r\n      <CreatePost user={user} setPosts={setPosts} />\r\n      <Segment>\r\n        {posts?.map((post) => (\r\n          <CardPost\r\n            key={post._id}\r\n            post={post}\r\n            user={user}\r\n            setPosts={setPosts}\r\n            setShowToastr={setShowToastr}\r\n          />\r\n        ))}\r\n      </Segment>\r\n    </div>\r\n  );\r\n}\r\n\r\nIndex.getInitialProps = async (ctx) => {\r\n  try {\r\n    const { token } = parseCookies(ctx);\r\n\r\n    const res = await axios.get(`${baseUrl}/api/posts`, {\r\n      headers: { Authorization: token },\r\n      params: { pageNumber: 1 },\r\n    });\r\n\r\n    return { postsData: res.data };\r\n  } catch (error) {\r\n    return { errorLoading: true };\r\n  }\r\n};\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}