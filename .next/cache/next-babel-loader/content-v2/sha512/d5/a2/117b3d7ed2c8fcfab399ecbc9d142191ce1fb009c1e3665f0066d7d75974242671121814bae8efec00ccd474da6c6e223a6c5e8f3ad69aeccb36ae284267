{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/Admin/Documents/Gato-cocial/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Admin/Documents/Gato-cocial/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/Admin/Documents/Gato-cocial/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\Gato-cocial\\\\components\\\\Post\\\\CreatePost.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// @ts-nocheck\nimport React, { useState, useRef } from \"react\";\nimport { Form, Button, Image, Divider, Message, Icon, Grid, Segment } from \"semantic-ui-react\";\nimport uploadPic from \"../../utils/uploadPicToCloudinary\";\nimport { submitNewPost } from \"../../utils/postActions\";\n\nfunction CreatePost(_ref) {\n  _s();\n\n  var user = _ref.user,\n      setPosts = _ref.setPosts;\n\n  var _useState = useState({\n    text: \"\",\n    location: \"\"\n  }),\n      newPost = _useState[0],\n      setNewPost = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var inputRef = useRef();\n\n  var _useState3 = useState(null),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useState4 = useState(false),\n      highlighted = _useState4[0],\n      setHighlighted = _useState4[1];\n\n  var _useState5 = useState(null),\n      media = _useState5[0],\n      setMedia = _useState5[1];\n\n  var _useState6 = useState(null),\n      mediaPreview = _useState6[0],\n      setMediaPreview = _useState6[1];\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value,\n        files = _e$target.files;\n\n    if (name === \"media\") {\n      var _URL;\n\n      setMedia(files[0]);\n      setMediaPreview((_URL = URL) === null || _URL === void 0 ? void 0 : _URL.createObjectURL(files[0]));\n    }\n\n    setNewPost(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, name, value));\n    });\n  };\n\n  var addStyles = function addStyles() {\n    return {\n      textAlign: \"center\",\n      height: \"40px\",\n      width: \"130px\",\n      border: \"dotted\",\n      paddingTop: media === null && \"8px\",\n      cursor: \"pointer\",\n      borderColor: highlighted ? \"green\" : \"black\",\n      marginTop: \"30px\",\n      marginLeft: \"30px\"\n    };\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var picUrl;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              setLoading(true);\n\n              if (!(media !== null)) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 5;\n              return uploadPic(media);\n\n            case 5:\n              picUrl = _context.sent;\n\n              if (picUrl) {\n                _context.next = 9;\n                break;\n              }\n\n              setLoading(false);\n              return _context.abrupt(\"return\", setError(\"Error Uploading Image\"));\n\n            case 9:\n              _context.next = 11;\n              return submitNewPost(newPost.text, newPost.location, picUrl, setPosts, setNewPost, setError);\n\n            case 11:\n              setMedia(null);\n              setMediaPreview(null);\n              setLoading(false);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(Segment, {\n    children: [/*#__PURE__*/_jsxDEV(Form, {\n      error: error !== null,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Message, {\n        error: true,\n        onDismiss: function onDismiss() {\n          return setError(null);\n        },\n        content: error,\n        header: \"Oops!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          src: user.profilePicUrl,\n          circular: true,\n          avatar: true,\n          inline: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.TextArea, {\n          placeholder: \"Whats Happening\",\n          name: \"text\",\n          value: newPost.text,\n          onChange: handleChange,\n          rows: 3,\n          width: 14\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        children: /*#__PURE__*/_jsxDEV(Grid.Row, {\n          children: [/*#__PURE__*/_jsxDEV(Grid.Column, {\n            width: 8,\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              style: {\n                marginTop: \"10px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n                value: newPost.location,\n                name: \"location\",\n                onChange: handleChange,\n                label: \"Add Location\",\n                icon: \"map marker alternate\",\n                placeholder: \"Want to add Location?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                ref: inputRef,\n                onChange: handleChange,\n                name: \"media\",\n                style: {\n                  display: \"none\",\n                  marginLeft: \"20px\"\n                },\n                type: \"file\",\n                accept: \"image/*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid.Column, {\n            width: 7,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: function onClick() {\n                return inputRef.current.click();\n              },\n              style: addStyles(),\n              onDrag: function onDrag(e) {\n                e.preventDefault();\n                setHighlighted(true);\n              },\n              onDragLeave: function onDragLeave(e) {\n                e.preventDefault();\n                setHighlighted(false);\n              },\n              onDrop: function onDrop(e) {\n                var _URL2;\n\n                e.preventDefault();\n                setHighlighted(true);\n                var droppedFile = Array.from(e.dataTransfer.files);\n                setMedia(droppedFile[0]);\n                setMediaPreview((_URL2 = URL) === null || _URL2 === void 0 ? void 0 : _URL2.createObjectURL(droppedFile[0]));\n              },\n              children: media === null ? /*#__PURE__*/_jsxDEV(Icon, {\n                name: \"image\",\n                size: \"large\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(Image, {\n                  style: {\n                    height: \"150px\",\n                    width: \"150px\"\n                  },\n                  src: mediaPreview,\n                  alt: \"PostImage\",\n                  centered: true,\n                  size: \"medium\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        hidden: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        circular: true,\n        disabled: newPost.text === \"\" || loading,\n        content: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 20\n        }, this),\n        style: {\n          backgroundColor: \"#1DA1F2\",\n          color: \"white\"\n        },\n        icon: \"send\",\n        loading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CreatePost, \"by+KBMXCHSd54idWKFQNAenHJTk=\");\n\n_c = CreatePost;\nexport default CreatePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreatePost\");","map":{"version":3,"sources":["C:/Users/Admin/Documents/Gato-cocial/components/Post/CreatePost.js"],"names":["React","useState","useRef","Form","Button","Image","Divider","Message","Icon","Grid","Segment","uploadPic","submitNewPost","CreatePost","user","setPosts","text","location","newPost","setNewPost","loading","setLoading","inputRef","error","setError","highlighted","setHighlighted","media","setMedia","mediaPreview","setMediaPreview","handleChange","e","target","name","value","files","URL","createObjectURL","prev","addStyles","textAlign","height","width","border","paddingTop","cursor","borderColor","marginTop","marginLeft","handleSubmit","preventDefault","picUrl","profilePicUrl","display","current","click","droppedFile","Array","from","dataTransfer","backgroundColor","color"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport React, { useState, useRef } from \"react\";\r\nimport {\r\n  Form,\r\n  Button,\r\n  Image,\r\n  Divider,\r\n  Message,\r\n  Icon,\r\n  Grid,\r\n  Segment,\r\n} from \"semantic-ui-react\";\r\nimport uploadPic from \"../../utils/uploadPicToCloudinary\";\r\nimport { submitNewPost } from \"../../utils/postActions\";\r\n\r\nfunction CreatePost({ user, setPosts }) {\r\n  const [newPost, setNewPost] = useState({ text: \"\", location: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const inputRef = useRef();\r\n\r\n  const [error, setError] = useState(null);\r\n  const [highlighted, setHighlighted] = useState(false);\r\n\r\n  const [media, setMedia] = useState(null);\r\n  const [mediaPreview, setMediaPreview] = useState(null);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n\r\n    if (name === \"media\") {\r\n      setMedia(files[0]);\r\n      setMediaPreview(URL?.createObjectURL(files[0]));\r\n    }\r\n\r\n    setNewPost((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const addStyles = () => ({\r\n    textAlign: \"center\",\r\n    height: \"40px\",\r\n    width: \"130px\",\r\n    border: \"dotted\",\r\n    paddingTop: media === null && \"8px\",\r\n    cursor: \"pointer\",\r\n    borderColor: highlighted ? \"green\" : \"black\",\r\n    marginTop: \"30px\",\r\n    marginLeft: \"30px\"\r\n  });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    let picUrl;\r\n\r\n    if (media !== null) {\r\n      picUrl = await uploadPic(media);\r\n      if (!picUrl) {\r\n        setLoading(false);\r\n        return setError(\"Error Uploading Image\");\r\n      }\r\n    }\r\n\r\n    await submitNewPost(\r\n      newPost.text,\r\n      newPost.location,\r\n      picUrl,\r\n      setPosts,\r\n      setNewPost,\r\n      setError\r\n    );\r\n\r\n    setMedia(null);\r\n    setMediaPreview(null);\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Segment>\r\n      <Form error={error !== null} onSubmit={handleSubmit}>\r\n        <Message\r\n          error\r\n          onDismiss={() => setError(null)}\r\n          content={error}\r\n          header=\"Oops!\"\r\n        />\r\n\r\n        <Form.Group>\r\n          <Image src={user.profilePicUrl} circular avatar inline />\r\n          <Form.TextArea\r\n            placeholder=\"Whats Happening\"\r\n            name=\"text\"\r\n            value={newPost.text}\r\n            onChange={handleChange}\r\n            rows={3}\r\n            width={14}\r\n          />\r\n        </Form.Group>\r\n        <Grid>\r\n          <Grid.Row>\r\n            <Grid.Column width={8}>\r\n              <Form.Group style={{ marginTop: \"10px\" }}>\r\n                <Form.Input\r\n                  value={newPost.location}\r\n                  name=\"location\"\r\n                  onChange={handleChange}\r\n                  label=\"Add Location\"\r\n                  icon=\"map marker alternate\"\r\n                  placeholder=\"Want to add Location?\"\r\n                />\r\n\r\n                <input\r\n                  ref={inputRef}\r\n                  onChange={handleChange}\r\n                  name=\"media\"\r\n                  style={{ display: \"none\", marginLeft: \"20px\" }}\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                />\r\n              </Form.Group>\r\n            </Grid.Column>\r\n            <Grid.Column width={7}>\r\n              <div\r\n                onClick={() => inputRef.current.click()}\r\n                style={addStyles()}\r\n                onDrag={(e) => {\r\n                  e.preventDefault();\r\n                  setHighlighted(true);\r\n                }}\r\n                onDragLeave={(e) => {\r\n                  e.preventDefault();\r\n                  setHighlighted(false);\r\n                }}\r\n                onDrop={(e) => {\r\n                  e.preventDefault();\r\n                  setHighlighted(true);\r\n\r\n                  const droppedFile = Array.from(e.dataTransfer.files);\r\n\r\n                  setMedia(droppedFile[0]);\r\n                  setMediaPreview(URL?.createObjectURL(droppedFile[0]));\r\n                }}\r\n              >\r\n                {media === null ? (\r\n                  <Icon name=\"image\" size=\"large\" />\r\n                ) : (\r\n                  <>\r\n                    <Image\r\n                      style={{ height: \"150px\", width: \"150px\" }}\r\n                      src={mediaPreview}\r\n                      alt=\"PostImage\"\r\n                      centered\r\n                      size=\"medium\"\r\n                    />\r\n                  </>\r\n                )}\r\n              </div>\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n\r\n        <Divider hidden />\r\n\r\n        <Button\r\n          circular\r\n          disabled={newPost.text === \"\" || loading}\r\n          content={<strong>Post</strong>}\r\n          style={{ backgroundColor: \"#1DA1F2\", color: \"white\" }}\r\n          icon=\"send\"\r\n          loading={loading}\r\n        />\r\n      </Form>\r\n      <Divider />\r\n    </Segment>\r\n  );\r\n}\r\n\r\nexport default CreatePost;\r\n"]},"metadata":{},"sourceType":"module"}