{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\Gato-cocial\\\\pages\\\\index.js\";\n// @ts-nocheck\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport baseUrl from \"../utils/baseUrl\";\nimport { NoPosts } from \"../components/Layout/Nodata\";\nimport CreatePost from \"../components/Post/CreatePost\";\nimport CardPost from \"../components/Post/CardPost\";\nimport { Segment } from \"semantic-ui-react\";\nimport { parseCookies } from \"nookies\";\n\nfunction Index(props) {\n  const {\n    user,\n    postsData,\n    errorLoading\n  } = props;\n  const {\n    0: posts,\n    1: setPosts\n  } = useState(postsData);\n  const {\n    0: showToastr,\n    1: setShowToastr\n  } = useState(false);\n  useEffect(() => {\n    document.title = `Welcome ${user.name.split(\"\")[0]}`;\n  }, []);\n  if (posts.length === 0 || errorLoading) return /*#__PURE__*/_jsxDEV(NoPosts, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 50\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Segment, {\n      style: {\n        marginTop: '15px',\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CreatePost, {\n        user: user,\n        setPosts: setPosts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), posts === null || posts === void 0 ? void 0 : posts.map(post => /*#__PURE__*/_jsxDEV(CardPost, {\n        post: post,\n        user: user,\n        setPosts: setPosts,\n        setShowToastr: setShowToastr\n      }, post._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\nIndex.getInitialProps = async ctx => {\n  try {\n    const {\n      token\n    } = parseCookies(ctx);\n    const res = await axios.get(`${baseUrl}/api/posts`, {\n      headers: {\n        Authorization: token\n      },\n      params: {\n        pageNumber: 1\n      }\n    });\n    return {\n      postsData: res.data\n    };\n  } catch (error) {\n    return {\n      errorLoading: true\n    };\n  }\n};\n\nexport default Index;","map":{"version":3,"sources":["C:/Users/Admin/Documents/Gato-cocial/pages/index.js"],"names":["React","useEffect","useState","axios","baseUrl","NoPosts","CreatePost","CardPost","Segment","parseCookies","Index","props","user","postsData","errorLoading","posts","setPosts","showToastr","setShowToastr","document","title","name","split","length","marginTop","marginBottom","map","post","_id","getInitialProps","ctx","token","res","get","headers","Authorization","params","pageNumber","data","error"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,OAAT,QAAwB,6BAAxB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,SAASC,OAAT,QAAwB,mBAAxB;AACA,SAASC,YAAT,QAA6B,SAA7B;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACpB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,SAAR;AAAmBC,IAAAA;AAAnB,MAAoCH,KAA1C;AACA,QAAM;AAAA,OAACI,KAAD;AAAA,OAAQC;AAAR,MAAoBd,QAAQ,CAACW,SAAD,CAAlC;AACA,QAAM;AAAA,OAACI,UAAD;AAAA,OAAaC;AAAb,MAA8BhB,QAAQ,CAAC,KAAD,CAA5C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdkB,IAAAA,QAAQ,CAACC,KAAT,GAAkB,WAAUR,IAAI,CAACS,IAAL,CAAUC,KAAV,CAAgB,EAAhB,EAAoB,CAApB,CAAuB,EAAnD;AACD,GAFQ,EAEN,EAFM,CAAT;AAGA,MAAIP,KAAK,CAACQ,MAAN,KAAiB,CAAjB,IAAsBT,YAA1B,EAAwC,oBAAO,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,UAAP;AACxC,sBACE;AAAA,2BACE,QAAC,OAAD;AAAS,MAAA,KAAK,EAAE;AAACU,QAAAA,SAAS,EAAE,MAAZ;AAAoBC,QAAAA,YAAY,EAAC;AAAjC,OAAhB;AAAA,8BACE,QAAC,UAAD;AAAY,QAAA,IAAI,EAAEb,IAAlB;AAAwB,QAAA,QAAQ,EAAEI;AAAlC;AAAA;AAAA;AAAA;AAAA,cADF,EAEGD,KAFH,aAEGA,KAFH,uBAEGA,KAAK,CAAEW,GAAP,CAAYC,IAAD,iBACV,QAAC,QAAD;AAEE,QAAA,IAAI,EAAEA,IAFR;AAGE,QAAA,IAAI,EAAEf,IAHR;AAIE,QAAA,QAAQ,EAAEI,QAJZ;AAKE,QAAA,aAAa,EAAEE;AALjB,SACOS,IAAI,CAACC,GADZ;AAAA;AAAA;AAAA;AAAA,cADD,CAFH;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAgBD;;AAEDlB,KAAK,CAACmB,eAAN,GAAwB,MAAOC,GAAP,IAAe;AACrC,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAYtB,YAAY,CAACqB,GAAD,CAA9B;AAEA,UAAME,GAAG,GAAG,MAAM7B,KAAK,CAAC8B,GAAN,CAAW,GAAE7B,OAAQ,YAArB,EAAkC;AAClD8B,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAEJ;AAAjB,OADyC;AAElDK,MAAAA,MAAM,EAAE;AAAEC,QAAAA,UAAU,EAAE;AAAd;AAF0C,KAAlC,CAAlB;AAKA,WAAO;AAAExB,MAAAA,SAAS,EAAEmB,GAAG,CAACM;AAAjB,KAAP;AACD,GATD,CASE,OAAOC,KAAP,EAAc;AACd,WAAO;AAAEzB,MAAAA,YAAY,EAAE;AAAhB,KAAP;AACD;AACF,CAbD;;AAeA,eAAeJ,KAAf","sourcesContent":["// @ts-nocheck\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport baseUrl from \"../utils/baseUrl\";\r\nimport { NoPosts } from \"../components/Layout/Nodata\";\r\nimport CreatePost from \"../components/Post/CreatePost\";\r\nimport CardPost from \"../components/Post/CardPost\";\r\nimport { Segment } from \"semantic-ui-react\";\r\nimport { parseCookies } from \"nookies\";\r\n\r\nfunction Index(props) {\r\n  const { user, postsData, errorLoading } = props;\r\n  const [posts, setPosts] = useState(postsData);\r\n  const [showToastr, setShowToastr] = useState(false);\r\n\r\n  useEffect(() => {\r\n    document.title = `Welcome ${user.name.split(\"\")[0]}`;\r\n  }, []);\r\n  if (posts.length === 0 || errorLoading) return <NoPosts />;\r\n  return (\r\n    <>\r\n      <Segment style={{marginTop: '15px', marginBottom:'20px'}}>\r\n        <CreatePost user={user} setPosts={setPosts} />\r\n        {posts?.map((post) => (\r\n          <CardPost\r\n            key={post._id}\r\n            post={post}\r\n            user={user}\r\n            setPosts={setPosts}\r\n            setShowToastr={setShowToastr}\r\n          />\r\n        ))}\r\n      </Segment>\r\n    </>\r\n  );\r\n}\r\n\r\nIndex.getInitialProps = async (ctx) => {\r\n  try {\r\n    const { token } = parseCookies(ctx);\r\n\r\n    const res = await axios.get(`${baseUrl}/api/posts`, {\r\n      headers: { Authorization: token },\r\n      params: { pageNumber: 1 },\r\n    });\r\n\r\n    return { postsData: res.data };\r\n  } catch (error) {\r\n    return { errorLoading: true };\r\n  }\r\n};\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}